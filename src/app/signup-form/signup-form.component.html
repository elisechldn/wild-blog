<form [formGroup]="signUpForm" (ngSubmit)="onSubmit()">
    <fieldset>
        <label for="username">Pseudo</label>
        <input 
            type="text" 
            name="username" 
            id="username" 
            formControlName="username" 
            minlength="3" 
            required>

        <!--Si le champ "username" du formulaire "SignUpForm" est invalide ET si le champ "username" a déjà été touché.-->
        @if (signUpForm.get('username')?.invalid && signUpForm.get('username')?.touched) {
            <div>
                <!-- Le form.get() et le ternaire, pas obligatoire. 
                Possible de : form.controls.username.errors[''] -->
                @if (signUpForm.get('username')?.errors?.['required']) {
                    <span>Le nom d'utilisateur est requis.</span>
                }
                @if (signUpForm.get('username')?.errors?.['minlength']) {
                    <span>Le nom d'utilisateur doit comporter au moins 3 caractères.</span>
                }
            </div>
        }
    </fieldset>
    <fieldset>
        <label for="email">Contact</label>
        <input 
            type="email" 
            name="email" 
            id="email"
            formControlName="email" 
            required 
            email>
        @if (signUpForm.get('email')?.invalid && signUpForm.get('email')?.touched) {
            <div>
                @if (signUpForm.get('email')?.errors?.['required']) {
                    <span>L'adresse email est requise.</span>
                }
                @if (signUpForm.get('email')?.errors?.['email']) {
                    <span>L'adresse email est invalide.</span>
                }
            </div>
        }
    </fieldset>
    <div formGroupName="passwords">   
    <fieldset>
        <label for="password">Mot de passe</label>
        <input 
            type="password" 
            name="password" 
            id="password" 
            formControlName="password" 
            required>
        @if (signUpForm.get('passwords.password')?.invalid && signUpForm.get('passwords.password')?.touched) {
            <div>
                @if (signUpForm.get('passwords.password')?.errors?.['required']) {
                    <span>Un mot de passe est requis.</span>
                }
                @if (signUpForm.get('passwords.password')?.errors?.['securePassword']) {
                    <span>Le mot de passe doit contenir au moins 12 caractères, avec une majuscule, une minuscule, un chiffre, et un caractère spécial.</span>
                }
            </div>
        }
    </fieldset>
    <fieldset>
        <label for="confirmPassword">Confirmez votre mot de passe</label>
        <input 
        type="password" 
        name="confirmPassword" 
        id="confirmPassword" 
        formControlName="confirmPassword">
        @if (signUpForm.get('passwords')?.errors?.['passwordsMismatch'] && signUpForm.get('passwords')?.touched) {
            <span>Les mots de passe ne correspondent pas.</span>
          }
    </fieldset>
    </div>
    <button type="submit" [disabled]="signUpForm.invalid">S'inscrire</button>
        <div>
        @if (signUpForm.invalid) {
            <span>Veuillez vérifier les informations saisies.</span>
        }
    </div>
</form>