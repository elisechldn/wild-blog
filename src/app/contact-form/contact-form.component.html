<form #contactForm="ngForm" (ngSubmit)="contactForm.valid && onSubmit()" class="form-contact">
    <!-- Message d'erreurs du formulaire global -->
  <div>
    Le formulaire est-il soumis ? {{contactForm.submitted}}
  </div>
  <div>
    Le formulaire est-il valide ? {{contactForm.valid}}
  </div>
  <div>
    Le formulaire est-il INvalide ? {{contactForm.invalid}}
  </div>
    <fieldset>
        <label for="lastname">Nom</label>
        <input type="text" name="lastname" id="lastname" minlength="2" maxlength="15" [(ngModel)]="newMessage.lastname" #lastname="ngModel" required>
            @if (contactForm.submitted) {
            @if (lastname.errors) {
                <div>
                    @if (lastname.errors['required']) {
                        <span>Le nom est requis</span>
                    }
                    @if (lastname.errors['minlength']) {
                        <span>Le nom doit comporter au moins 2 caractères.</span>
                    }
                    @if (lastname.errors['maxlength']) {
                        <span>Le nom ne doit pas dépasser 15 caractères.</span>
                    }
                </div>
            }
        }
        </fieldset>
        <fieldset>
        <label for="firstname">Prénom</label>
        <input type="text" name="firstname" id="firstname" minlength="2" maxlength="15" [(ngModel)]="newMessage.firstname" #firstname="ngModel" required>
        @if(contactForm.submitted) {
        @if (firstname.errors) {
            <div>
                @if (firstname.errors['required']) {
                    <span>Le prénom est requis</span>
                }
                @if (firstname.errors['minlength']) {
                    <span>Le prénom doit comporter au moins 2 caractères.</span>
                }
                @if (firstname.errors['maxlength']) {
                    <span>Le prénom ne doit pas dépasser 15 caractères.</span>
                }
            </div>
          }
        }
    </fieldset>
    <fieldset>
        <label for="email">Contact</label>
        <input type="email" name="email" id="email" [(ngModel)]="newMessage.email" #email="ngModel" required email>
        @if(contactForm.submitted) {
        @if (email.errors) {
            <div>
                @if (email.errors['required']) {
                    <span>L'email est requis.</span>
                }
                @if (email.errors['email']) {
                    <span>L'email est invalide.</span>
                }
            </div>
        }
    }
    </fieldset>
    <fieldset>
        <label for="content">Votre message</label>
        <textarea name="content" id="content" [(ngModel)]="newMessage.content" #content="ngModel" minlength="20" required></textarea>
        @if (contactForm.submitted) {
        @if (content.errors) {
            <div>
                @if(content.errors['required']) {
                    <span>Veuillez indiquer un motif de contact.</span>
                }
                @if(content.errors['minlength']) {
                    <span>Le contenu doit comporter au moins 20 caractères.</span>
                }
            </div>
        }
    }
    </fieldset>
    <button type="submit">Envoyer</button>
    <button type="reset">Restaurer</button>
</form>